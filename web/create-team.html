<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/app.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
    />
    <script type="text/javascript" src="main.js"></script>
    <script data-main="main.js" type="text/javascript" src="/eel.js"></script>
    <script data-main="main.js" src="jquery/jquery-3.6.0.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div class="wrapper">
      <div class="sidecard">
        <ul class="list-group">
          <button class="sidebtn" onclick="location.href='custom.html'">
            Custom Game
          </button>
          <button class="sidebtn" onclick="location.href='create-team.html'">
            Create Team
          </button>
        </ul>
        <div
          class="absolute home"
          style="font-size: 1.3rem"
          onclick="location.href='index.html'"
        >
          <i class="bi bi-house-door-fill"></i> Home
        </div>
      </div>
      <div class="maincard">
        <h1 class="pagehead">Create Team</h1>
        <div>
          <div class="create-wrapper">
            <div>
              <p>
                <b>Current Teams:</b>
              </p>
              <div id="team-list-display" class="team-list-display"></div>
            </div>
            <div>
              <p>
                <b>Create Team:</b>
                <div style="display: grid;grid-template-columns: 30% 70%;">
                    <div>
                        <input type="text" style="min-height: 20px;" placeholder="Team name"/>
                        <div style="padding-top: 1em;">
                         <label for="team-color">Pick team color: </label>
                         <input id="team-color" type="color" />
                        </div>
                    </div>
                    <div style="padding-left: 2em;">
                        <input type="text" id="myInput" onkeyup="mySearchFunction()" placeholder="Search for names..">
                        <ul id="myUL">
                          
                          </ul>
                    </div>
                </div>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
        function mySearchFunction() {
          var searchTerm = document.getElementById("myInput").value.toUpperCase()
          var children = document.getElementById("myUL").children;
          for (var i = 0; i < children.length; i++) {
            var liChild = children[i];
            if(liChild.innerHTML.includes(searchTerm)){
                liChild.hidden = false
            }
            else{
                liChild.hidden = true
            }
          }
        }
        </script>
    <script>
      eel.fetchData("teamlist")(function (result) {
        var teamsArray = [];
        for (const [key, value] of Object.entries(result)) {
          teamsArray.push(key);
        }
        var mySelect = document.getElementById("team-list-display");
        for (teamElement in teamsArray) {
          var newOne = document.createElement("p");
          newOne.style.padding = 0;
          newOne.style.margin = 0;
          newOne.innerHTML = teamsArray[teamElement].toUpperCase();
          mySelect.append(newOne);
        }
      });
      eel.fetchData("players")(function (result) {
        var playerArray = [];
        for (const [key, value] of Object.entries(result)) {
          playerArray.push(key);
        }
        var mySelect = document.getElementById("myUL");
        for (index in playerArray) {
          var newOne = document.createElement("li");
          newOne.value = playerArray[index];
          newOne.innerHTML = playerArray[index].toUpperCase();
          mySelect.append(newOne);
        }
      });
    </script>
    <script>
      var size = [1100, 680];
      $(window).resize(function () {
        window.resizeTo(size[0], size[1]);
      });
    </script>
  </body>
</html>
